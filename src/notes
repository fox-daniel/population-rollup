REMOVE ROW LIMIT IN GROUPBY_CBSA
DONT FORGET TO REREAD THE DIRECTIONS
DONT FORGET TO APPLY black and other formatting and checks
REMOVE RELOAD IMPORTS
RUN ON AWS LINUX MACHINE by cloning git repo, not from files on my machine

There are 74003 rows; row 0 is column names; 74002 rows of census data

CREATE VIRTUALENV WITH JUST PYTHON3.7.3

Change pipeline so that there is only one load of the csv and all transformations are made in memory

In pipeline: create list of paths to files and then use generator to call them and auto insert into functions?

Switch dictionary access to .get method and report to error log

CSI = 3 if outside of CBSA

CBSA title has "," so enclose title in double quotes

How will my solution scale? 
	

clean up code according to: https://imankulov.name/posts/python-cleanup/
	- revise README according to models listed
	- update requirements file
	- remove unused imports
	- remove unused variables
	- follow PEP-8 naming conventions
	- format code with 'black' (learn to use from command line)
	[NOT DONE]- run pylint
	- remove debugging prints
	- remove commented-out code

Tests: separate folder for each test (functional correctness & scaling (memory usage vs time))
	-to run test, move input & output csv's to top-level input and output directories and run code
	-use pandas to generate input and output files for tests
	-Unit
	-End-to-end
	-move all reused functions to a module in src
	-test rounding
	-tests for data with problematic or missing values in different columns
	- what if csv has blank row?
	-Test on a larger data set, generate it so it can be used for tests
	-make a graph of time against size of csv - should be no worse than linear
	-make a graph of time against number of csvs - should be linear

Run.sh
	use python3.7 command in 
	create empty log files for all tests and for main script

For this challenge, we want to know for each Core Based Statistical Area, the

total number of census tracts,
total population in 2000,
total population in 2010 and
average population percent change for census tracts in this Core Based Statistical Area

1. select relevant columns
2. groupby CBSA -- Must deal with tracts not in CBSA 
	count number of census tracts
	sum pop from 2000
	sum pop from 2010
	mean PCH

For every line that exists in the output file, the following fields should be written in this order:

Core Based Statstical Area Code (i.e., CBSA09)
Core Based Statistical Area Code Title (i.e., CBSA_T)
total number of census tracts
total population in the CBSA in 2000
total population in the CBSA in 2010
average population percent change for census tracts in this CBSA. Round to two decimal places using standard rounding conventions (i.e., Any percentage between 0.005% and 0.010%, inclusive, should round to 0.01% and anything less than 0.005% should round to 0.00%)



Add to README

PPCH = '(X)'
When PP00 is 0 the PPCH is reported as infinite using the symbol '(X)'. This is done even if PP10 is also 0 even though in that case one could argue to report the PPCH as 0. When a CBSA contains a census tract for which PPCH is reported as '(X)', then the average PPCH over the CBSA is reported as '(X)' under the convention that infinity plus a finite number (or infinity) is infinity. Other reporting options might prove more useful. For example, the census tracts with PPCH = '(X)' could be dropped from the computation of the average. Another possibility would be to set PPCH = 0 if PP00 = PP10 = 0; this would apply to some CBSAs but still require a choice to be made when PP00 = 0 and PP10 > 0.

test_4
This tests two transformations:
	1. If the CBSA09 or CBSA_T are missing they are filled with GEOID and "MISSING", respectively.
	2. The subset of columns needed are selected and the rest are dropped.

This code could be improved to scale better in the following ways.
	1. If large csv files (> n GB) are expected as input, then...
	2. If large numbers of csv files (> n files) are expected as input, then...